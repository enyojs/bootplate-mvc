 <!-- generated from template for fittotargetboundslayout.js -->      <section class="file">   <header>     <span class="title">FitToTargetBoundsLayout.js</span>     <span class="path">source/ext/FitToTargetBoundsLayout.js</span>   </header>             <section class="group">       <section class="comments">                </section>       <section class="source">         <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  </pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <h2>An interesting <code>enyo.Layout</code>, <code>Mvc.FitToTargetBounds</code></h2>

<p>We needed to make sure that the editor would match the
current dimensions of another <em>view</em> that was not directly
in its own tree. Using the logic behind <code>enyo.getPath</code> we
can easily abstract this desire to something that is
reuseable for other objects. On the <em>view</em> implementing the
<code>Mvc.FitToTargetBounds</code> <em>layoutKind</em> simply have a property
<code>fitTarget</code> that can be a string path (relative to the <em>view</em>)
or a full path to an instance or an object reference.</p>       </section>       <section class="source">         <div class="highlight"><pre>    <span class="nx">enyo</span><span class="p">.</span><span class="nx">kind</span><span class="p">({</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>The name seemed "fitting"...</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Mvc.FitToTargetBoundsLayout&quot;</span><span class="p">,</span>
        <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;enyo.Layout&quot;</span><span class="p">,</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Local copy of the property from the container.</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="nx">targetPath</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">inherited</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">fitTarget</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;string&quot;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_target</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">;</span>
            <span class="p">}</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>We want to register a listener for changes of the
<code>showing</code> state of our container. In cases where
sizes might have ocurred but we weren't visible
we will not be triggered to reflow.</p>       </section>       <section class="source">         <div class="highlight"><pre>            <span class="nx">container</span><span class="p">.</span><span class="nx">addObserver</span><span class="p">(</span><span class="s2">&quot;showing&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">reflow</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">},</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Here is where that <code>enyo.getPath</code> magic occurs.</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="nx">reflow</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>By default, <code>enyo.Layout</code> kinds do not inherit the
<code>get</code> method but we can easily facade it by calling
<code>enyo.getPath</code> with the context set as ourselves.</p>       </section>       <section class="source">         <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">getPath</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">setBounds</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">(),</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
        <span class="p">},</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Here we use a computed property that ultimately caches
its initial run. While not completely necessary it does
organize the logic associated with the property to a
single location rather than have it spread out with
lots of additional tests attempting to detect if it has
been initialized.</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="nx">target</span><span class="o">:</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">Computed</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_target</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_target</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">getPath</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">)</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Cannot find the requested target&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">);</span>
        <span class="p">})</span>
    <span class="p">});</span>
  
<span class="p">}());</span>

</pre></div>       </section>     </section>    </section>