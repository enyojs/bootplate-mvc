 <!-- generated from template for fittotargetboundslayout.js -->      <section class="file">   <header>     <span class="title">FitToTargetBoundsLayout.js</span>     <span class="path">source/ext/FitToTargetBoundsLayout.js</span>   </header>             <section class="group">       <section class="comments">                </section>       <section class="source">         <div class="highlight"><pre></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <h2><code>Sample.FitToTargetBoundsLayout</code>, an interesting layout kind</h2>

<p>We need to make sure that the editor matches the current
dimensions of another view not directly in its own tree.
Using <code>enyo.getPath</code>, we can easily abstract this
functionality into something reuseable by other objects.
On the view implementing this layout kind, we specify a
value for the <code>fitTarget</code> property, which can be a string
path (relative to the view) or a full path to an instance
or an object reference.</p>       </section>       <section class="source">         <div class="highlight"><pre><span class="nx">enyo</span><span class="p">.</span><span class="nx">kind</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Sample.FitToTargetBoundsLayout&quot;</span><span class="p">,</span>
    <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;enyo.Layout&quot;</span><span class="p">,</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Local copy of the property from the container</p>       </section>       <section class="source">         <div class="highlight"><pre>    <span class="nx">targetPath</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">inherited</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">fitTarget</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;string&quot;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_target</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">;</span>
        <span class="p">}</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Register a listener for changes to the <code>showing</code> state
of our container.  If resizing occurs while we're not
visible, we won't be triggered to reflow.</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="nx">container</span><span class="p">.</span><span class="nx">addObserver</span><span class="p">(</span><span class="s2">&quot;showing&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">reflow</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>This is where <code>enyo.getPath</code> comes in.</p>       </section>       <section class="source">         <div class="highlight"><pre>    <span class="nx">reflow</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>By default, layout kinds do not inherit the <code>get</code> method,
but we can instead call <code>enyo.getPath</code> with the context
set as ourselves.</p>       </section>       <section class="source">         <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">getPath</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">setBounds</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">(),</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
    <span class="p">},</span></pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>This method computes the value of the <code>target</code> property,
caching the results of its initial run. While not completely
necessary, it lets us store the logic associated with the
property in a single location, eliminating the need for extra
tests to detect whether <code>target</code> has been initialized.</p>       </section>       <section class="source">         <div class="highlight"><pre>    <span class="nx">target</span><span class="o">:</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">Computed</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">target</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_target</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_target</span><span class="p">;</span>
        <span class="nx">target</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">getPath</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetPath</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">)</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Cannot find the requested target&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">});</span>

</pre></div>       </section>     </section>    </section>